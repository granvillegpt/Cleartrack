<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8" />

  <title>Reset Password - ClearTrack</title>

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta

    name="description"

    content="Reset your ClearTrack account password."

  />

  <link rel="icon" type="image/png" href="assets/images/icon%20logo.png" />

  <link rel="stylesheet" href="/css/ct-theme.css" />
  <link rel="stylesheet" href="/header-responsive-fixes.css" />

  <style>

    body {

      margin: 0;

      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;

      background: #e5f3f7;

      display: flex;

      min-height: 100vh;

      align-items: center;

      justify-content: center;

    }

    .wrapper {

      max-width: 420px;

      width: 100%;

      padding: 1.5rem;

    }

    .card {

      background: #ffffff;

      border-radius: 16px;

      box-shadow: 0 4px 16px rgba(15, 23, 42, 0.12);

      padding: 1.75rem 1.5rem 1.5rem;

    }

    h1 {

      font-size: 1.4rem;

      margin: 0 0 0.5rem;

      text-align: center;

      color: #0b7285;

    }

    p.subtitle {

      font-size: 0.9rem;

      color: #6b7785;

      text-align: center;

      margin-bottom: 1.25rem;

    }

    label {

      display: block;

      margin-bottom: 0.25rem;

      font-size: 0.9rem;

      color: #334e68;

    }

    input[type="password"],
    input[type="text"] {

      width: 100%;

      box-sizing: border-box;

      padding: 0.6rem 0.7rem;

      border-radius: 8px;

      border: 1px solid #cbd2e1;

      font-size: 0.95rem;

      margin-bottom: 0.9rem;

    }
    
    div[style*="position: relative"] {
      width: 100%;
      box-sizing: border-box;
    }
    
    div[style*="position: relative"] input {
      width: 100%;
      box-sizing: border-box;
    }


    button {

      width: 100%;

      padding: 0.75rem;

      border-radius: 999px;

      border: none;

      cursor: pointer;

      background: #0b7285;

      color: #ffffff;

      font-size: 0.95rem;

      font-weight: 600;

      margin-top: 0.25rem;

    }

    button:hover {

      background: #095a69;

    }

    button:disabled {

      background: #95a5a6;

      cursor: not-allowed;

    }

    /* Submit button styles - Shadow/3D Effect */
    button[type="submit"] {
      border-radius: 8px;
      border: 1px solid #0b7285;
      box-shadow: 0 4px 8px rgba(11, 114, 133, 0.2);
      transition: all 0.2s;
    }

    button[type="submit"]:hover {
      border-color: #095a69;
      box-shadow: 0 6px 12px rgba(11, 114, 133, 0.3);
    }

    .error {

      color: #b00020;

      font-size: 0.85rem;

      margin-top: 0.5rem;

      display: none;

    }

    .error.show {

      display: block;

    }

    .success-notification {

      border: 1px solid #10b981;

      border-radius: 6px;

      padding: 1rem;

      color: #065f46;

      font-size: 0.9rem;

      margin-top: 0.5rem;

      margin-bottom: 0.5rem;

      display: none;

      background: #ffffff;

    }

    .success-notification.show {

      display: block;

    }

    .brand {

      text-align: center;

      font-size: 0.85rem;

      color: #6b7785;

      margin-top: 0.75rem;

    }

    .brand a {

      color: #0b7285;

      text-decoration: none;

    }

    .brand a:hover {

      text-decoration: underline;

    }

  </style>

</head>

<body>

  <div class="wrapper">

    <div class="card">

      <h1 style="display:flex; flex-direction:column; align-items:center;">

        <img src="assets/images/full%20logo%20CT.png" alt="ClearTrack Logo" style="height:60px; margin-bottom:12px;">

        Reset Password

      </h1>

      <p class="subtitle" id="subtitleText">

        Enter your new password below.

      </p>

      <div id="noTokenMessage" class="error" style="display: none; text-align: center; padding: 1rem; background: #fef3c7; border: 1px solid #f59e0b; border-radius: 8px; color: #92400e;">
        Please use the password reset link from your email to reset your password. If you don't have the link, <a href="/login.html" style="color: #0b7285; text-decoration: underline;">request a new one</a>.
      </div>

      <form id="resetPasswordForm">

        <label for="password">New Password</label>

        <div style="position: relative;">
          <input id="password" type="password" autocomplete="new-password" required minlength="6" style="padding-right: 2.5rem;" />
          <button type="button" id="togglePassword" style="position: absolute; right: 0.75rem; top: 29%; transform: translateY(-50%); background: none; border: none; cursor: pointer; padding: 0.25rem; color: #6b7280; display: flex; align-items: center; justify-content: center; width: 24px; height: 24px;" aria-label="Toggle password visibility">
            <svg id="passwordIcon" width="20" height="20" viewBox="0 0 90 90" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M 45 73.264 c -14.869 0 -29.775 -8.864 -44.307 -26.346 c -0.924 -1.112 -0.924 -2.724 0 -3.836 C 15.225 25.601 30.131 16.737 45 16.737 c 14.868 0 29.775 8.864 44.307 26.345 c 0.925 1.112 0.925 2.724 0 3.836 C 74.775 64.399 59.868 73.264 45 73.264 z M 6.934 45 C 19.73 59.776 32.528 67.264 45 67.264 c 12.473 0 25.27 -7.487 38.066 -22.264 C 70.27 30.224 57.473 22.737 45 22.737 C 32.528 22.737 19.73 30.224 6.934 45 z"/>
              <path d="M 45 62 c -9.374 0 -17 -7.626 -17 -17 s 7.626 -17 17 -17 s 17 7.626 17 17 S 54.374 62 45 62 z M 45 34 c -6.065 0 -11 4.935 -11 11 s 4.935 11 11 11 s 11 -4.935 11 -11 S 51.065 34 45 34 z"/>
            </svg>
          </button>
        </div>

        <label for="confirmPassword">Confirm New Password</label>

        <div style="position: relative;">
          <input id="confirmPassword" type="password" autocomplete="new-password" required minlength="6" style="padding-right: 2.5rem;" />
          <button type="button" id="toggleConfirmPassword" style="position: absolute; right: 0.75rem; top: 29%; transform: translateY(-50%); background: none; border: none; cursor: pointer; padding: 0.25rem; color: #6b7280; display: flex; align-items: center; justify-content: center; width: 24px; height: 24px;" aria-label="Toggle password visibility">
            <svg id="confirmPasswordIcon" width="20" height="20" viewBox="0 0 90 90" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M 45 73.264 c -14.869 0 -29.775 -8.864 -44.307 -26.346 c -0.924 -1.112 -0.924 -2.724 0 -3.836 C 15.225 25.601 30.131 16.737 45 16.737 c 14.868 0 29.775 8.864 44.307 26.345 c 0.925 1.112 0.925 2.724 0 3.836 C 74.775 64.399 59.868 73.264 45 73.264 z M 6.934 45 C 19.73 59.776 32.528 67.264 45 67.264 c 12.473 0 25.27 -7.487 38.066 -22.264 C 70.27 30.224 57.473 22.737 45 22.737 C 32.528 22.737 19.73 30.224 6.934 45 z"/>
              <path d="M 45 62 c -9.374 0 -17 -7.626 -17 -17 s 7.626 -17 17 -17 s 17 7.626 17 17 S 54.374 62 45 62 z M 45 34 c -6.065 0 -11 4.935 -11 11 s 4.935 11 11 11 s 11 -4.935 11 -11 S 51.065 34 45 34 z"/>
            </svg>
          </button>
        </div>

        <button id="submitBtn" type="submit">Reset Password</button>

        <div id="successMessage" class="success-notification">Password successfully reset!</div>

        <div id="errorMessage" class="error"></div>

      </form>

    </div>



    <div class="brand">

      <a href="/login.html" class="back-link">‚Üê Back to Login</a>

    </div>

  </div>



  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore-compat.js"></script>
  <!-- Config and Initialization -->
  <script src="firebase-config.js"></script>
  <script src="firebase-init.js"></script>
  <!-- Page Logic -->
  <script src="reset-password.js"></script>

  <script>
    // Password visibility toggle
    const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('password');
    
    // Eye icon SVG (show password)
    const eyeIcon = `<svg id="passwordIcon" width="20" height="20" viewBox="0 0 90 90" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <path d="M 45 73.264 c -14.869 0 -29.775 -8.864 -44.307 -26.346 c -0.924 -1.112 -0.924 -2.724 0 -3.836 C 15.225 25.601 30.131 16.737 45 16.737 c 14.868 0 29.775 8.864 44.307 26.345 c 0.925 1.112 0.925 2.724 0 3.836 C 74.775 64.399 59.868 73.264 45 73.264 z M 6.934 45 C 19.73 59.776 32.528 67.264 45 67.264 c 12.473 0 25.27 -7.487 38.066 -22.264 C 70.27 30.224 57.473 22.737 45 22.737 C 32.528 22.737 19.73 30.224 6.934 45 z"/>
      <path d="M 45 62 c -9.374 0 -17 -7.626 -17 -17 s 7.626 -17 17 -17 s 17 7.626 17 17 S 54.374 62 45 62 z M 45 34 c -6.065 0 -11 4.935 -11 11 s 4.935 11 11 11 s 11 -4.935 11 -11 S 51.065 34 45 34 z"/>
    </svg>`;
    
    // Eye-slash icon SVG (hide password)
    const eyeSlashIcon = `<svg id="passwordIcon" width="20" height="20" viewBox="0 0 90 90" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <path d="M 13.148 79.853 c -0.768 0 -1.536 -0.293 -2.121 -0.879 c -1.172 -1.171 -1.172 -3.071 0 -4.242 l 63.705 -63.705 c 1.172 -1.172 3.07 -1.172 4.242 0 c 1.172 1.171 1.172 3.071 0 4.242 L 15.269 78.974 C 14.684 79.56 13.916 79.853 13.148 79.853 z"/>
      <path d="M 25.296 67.703 c -0.504 0 -1.012 -0.127 -1.474 -0.388 C 16.105 62.961 8.323 56.098 0.693 46.918 c -0.924 -1.112 -0.924 -2.724 0 -3.835 c 21.533 -25.904 43.565 -32.767 65.485 -20.399 c 0.816 0.461 1.371 1.277 1.498 2.207 s -0.188 1.864 -0.852 2.527 L 27.418 66.824 C 26.841 67.402 26.073 67.703 25.296 67.703 z M 6.933 45 c 5.972 6.896 11.974 12.242 17.891 15.934 l 34.842 -34.842 C 42.131 18.098 24.824 24.311 6.933 45 z"/>
      <path d="M 34.394 58.606 c -0.795 0 -1.558 -0.315 -2.121 -0.878 C 28.873 54.329 27 49.809 27 45 c 0 -9.925 8.075 -18 18 -18 c 4.749 0 9.23 1.833 12.617 5.163 c 0.569 0.56 0.893 1.322 0.897 2.12 s -0.308 1.565 -0.869 2.132 L 36.524 57.719 c -0.562 0.566 -1.326 0.886 -2.124 0.888 C 34.398 58.606 34.396 58.606 34.394 58.606 z M 45 33 c -6.617 0 -12 5.383 -12 12 c 0 2.175 0.574 4.261 1.651 6.085 L 50.995 34.6 C 49.19 33.556 47.136 33 45 33 z"/>
      <path d="M 44.973 73.26 c -3.552 0 -7.104 -0.501 -10.657 -1.505 c -1.594 -0.45 -2.521 -2.108 -2.071 -3.703 c 0.45 -1.594 2.105 -2.524 3.703 -2.07 C 51.38 70.341 67.226 63.287 83.066 45 c -3.977 -4.592 -7.98 -8.514 -11.925 -11.68 c -1.292 -1.037 -1.499 -2.925 -0.462 -4.218 c 1.038 -1.292 2.927 -1.499 4.218 -0.462 c 4.796 3.849 9.644 8.708 14.409 14.442 c 0.925 1.111 0.925 2.724 0 3.835 C 74.743 64.438 59.874 73.26 44.973 73.26 z"/>
      <path d="M 45 63 c -0.386 0 -0.77 -0.013 -1.149 -0.036 c -1.654 -0.101 -2.913 -1.523 -2.812 -3.178 c 0.102 -1.652 1.527 -2.909 3.178 -2.811 C 44.476 56.991 44.737 57 45 57 c 6.617 0 12 -5.383 12 -12 c 0 -0.27 -0.009 -0.538 -0.026 -0.803 c -0.107 -1.653 1.146 -3.081 2.799 -3.188 c 1.665 -0.103 3.082 1.146 3.189 2.799 C 62.987 44.202 63 44.599 63 45 C 63 54.925 54.925 63 45 63 z"/>
    </svg>`;
    
    // Confirm password eye icon SVG (show password)
    const confirmEyeIcon = `<svg id="confirmPasswordIcon" width="20" height="20" viewBox="0 0 90 90" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <path d="M 45 73.264 c -14.869 0 -29.775 -8.864 -44.307 -26.346 c -0.924 -1.112 -0.924 -2.724 0 -3.836 C 15.225 25.601 30.131 16.737 45 16.737 c 14.868 0 29.775 8.864 44.307 26.345 c 0.925 1.112 0.925 2.724 0 3.836 C 74.775 64.399 59.868 73.264 45 73.264 z M 6.934 45 C 19.73 59.776 32.528 67.264 45 67.264 c 12.473 0 25.27 -7.487 38.066 -22.264 C 70.27 30.224 57.473 22.737 45 22.737 C 32.528 22.737 19.73 30.224 6.934 45 z"/>
      <path d="M 45 62 c -9.374 0 -17 -7.626 -17 -17 s 7.626 -17 17 -17 s 17 7.626 17 17 S 54.374 62 45 62 z M 45 34 c -6.065 0 -11 4.935 -11 11 s 4.935 11 11 11 s 11 -4.935 11 -11 S 51.065 34 45 34 z"/>
    </svg>`;
    
    // Confirm password eye-slash icon SVG (hide password)
    const confirmEyeSlashIcon = `<svg id="confirmPasswordIcon" width="20" height="20" viewBox="0 0 90 90" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <path d="M 13.148 79.853 c -0.768 0 -1.536 -0.293 -2.121 -0.879 c -1.172 -1.171 -1.172 -3.071 0 -4.242 l 63.705 -63.705 c 1.172 -1.172 3.07 -1.172 4.242 0 c 1.172 1.171 1.172 3.071 0 4.242 L 15.269 78.974 C 14.684 79.56 13.916 79.853 13.148 79.853 z"/>
      <path d="M 25.296 67.703 c -0.504 0 -1.012 -0.127 -1.474 -0.388 C 16.105 62.961 8.323 56.098 0.693 46.918 c -0.924 -1.112 -0.924 -2.724 0 -3.835 c 21.533 -25.904 43.565 -32.767 65.485 -20.399 c 0.816 0.461 1.371 1.277 1.498 2.207 s -0.188 1.864 -0.852 2.527 L 27.418 66.824 C 26.841 67.402 26.073 67.703 25.296 67.703 z M 6.933 45 c 5.972 6.896 11.974 12.242 17.891 15.934 l 34.842 -34.842 C 42.131 18.098 24.824 24.311 6.933 45 z"/>
      <path d="M 34.394 58.606 c -0.795 0 -1.558 -0.315 -2.121 -0.878 C 28.873 54.329 27 49.809 27 45 c 0 -9.925 8.075 -18 18 -18 c 4.749 0 9.23 1.833 12.617 5.163 c 0.569 0.56 0.893 1.322 0.897 2.12 s -0.308 1.565 -0.869 2.132 L 36.524 57.719 c -0.562 0.566 -1.326 0.886 -2.124 0.888 C 34.398 58.606 34.396 58.606 34.394 58.606 z M 45 33 c -6.617 0 -12 5.383 -12 12 c 0 2.175 0.574 4.261 1.651 6.085 L 50.995 34.6 C 49.19 33.556 47.136 33 45 33 z"/>
      <path d="M 44.973 73.26 c -3.552 0 -7.104 -0.501 -10.657 -1.505 c -1.594 -0.45 -2.521 -2.108 -2.071 -3.703 c 0.45 -1.594 2.105 -2.524 3.703 -2.07 C 51.38 70.341 67.226 63.287 83.066 45 c -3.977 -4.592 -7.98 -8.514 -11.925 -11.68 c -1.292 -1.037 -1.499 -2.925 -0.462 -4.218 c 1.038 -1.292 2.927 -1.499 4.218 -0.462 c 4.796 3.849 9.644 8.708 14.409 14.442 c 0.925 1.111 0.925 2.724 0 3.835 C 74.743 64.438 59.874 73.26 44.973 73.26 z"/>
      <path d="M 45 63 c -0.386 0 -0.77 -0.013 -1.149 -0.036 c -1.654 -0.101 -2.913 -1.523 -2.812 -3.178 c 0.102 -1.652 1.527 -2.909 3.178 -2.811 C 44.476 56.991 44.737 57 45 57 c 6.617 0 12 -5.383 12 -12 c 0 -0.27 -0.009 -0.538 -0.026 -0.803 c -0.107 -1.653 1.146 -3.081 2.799 -3.188 c 1.665 -0.103 3.082 1.146 3.189 2.799 C 62.987 44.202 63 44.599 63 45 C 63 54.925 54.925 63 45 63 z"/>
    </svg>`;
    
    if (togglePassword && passwordInput) {
      togglePassword.addEventListener('click', function() {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        // Get fresh reference to icon element each time
        const passwordIcon = document.getElementById('passwordIcon');
        if (passwordIcon) {
          passwordIcon.outerHTML = type === 'password' ? eyeIcon : eyeSlashIcon;
        }
      });
    }

    // Confirm password toggle
    const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');
    const confirmPasswordInput = document.getElementById('confirmPassword');
    
    if (toggleConfirmPassword && confirmPasswordInput) {
      toggleConfirmPassword.addEventListener('click', function() {
        const type = confirmPasswordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        confirmPasswordInput.setAttribute('type', type);
        // Get fresh reference to icon element each time
        const confirmPasswordIcon = document.getElementById('confirmPasswordIcon');
        if (confirmPasswordIcon) {
          confirmPasswordIcon.outerHTML = type === 'password' ? confirmEyeIcon : confirmEyeSlashIcon;
        }
      });
    }
  </script>

</body>

</html>




